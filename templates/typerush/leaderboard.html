{% extends 'typerush/base.html' %}
{% load static %}

{% block title_block %}
    Leaderboard
{% endblock %}

{% block css %}
    <!-- filename in cap letter and works? -->
    <link href="{% static 'stylesheets/Leaderboard.css' %}" rel="stylesheet" type="text/css" />
{% endblock %}

{% block main_block %}
    {% if user.is_authenticated %}
        <div class="left-panel">
            <div class="rank-box">
                <div class="rank-display">
                    <h3>My Rank</h3>
                    <h2>{{ user_instance.rank }} Place</h2>
                </div>
                <div class="score-display">
                    <h3>Average Score</h3>
                    <h2>{{ user_instance.average_speed }}</h2>
                </div>
            </div>
            <div class="personal-info">
                <div class="my-profile">
                    My Profile
                </div>
                <div class="profile-pic">
                    <img src="{{ MEDIA_URL }}profile_images/{{ user_instance.profile_picture }}" alt="profile-img"/>
                </div>
                <div class="profile-title">
                    <h2 id="username">{{ user_instance.user.username }}</h2>
                    <h3 id="real-name">{{ user_instance.firstname }} {{ user_instance.surname }}</h3>
                </div>
            </div>
        </div>
    {% endif %}

    <div class="right-panel">
        <div class="leaderboard-header">
            <div class="table-title">
                Leaderboard
            </div>
            <div class="select-mode">
                <button type="button">
                    Easy
                </button>
                <button type="button">
                    Medium
                </button>
                <button type="button">
                    Hard
                </button>
            </div>
        </div>
        
        <table>
            <thead>
                <tr class="table-header">
                    <th>Rank</th>
                    <th>Racer</th>
                    <th>Score</th>
                </tr>
            </thead>
            <tbody>
                {% for mode, top_games in top_games_by_mode.items %}
                    <tr>
                        <td colspan="3" class="mode-title">{{ mode.difficulty }}</td>
                    </tr>
                    {% for game in top_games %}
                        <tr>
                            <td>{{ forloop.counter }}</td>
                            <td>{{ game.user.user.username }}</td>
                            <td>{{ game.score }}</td>
                        </tr>
                    {% endfor %}
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}
